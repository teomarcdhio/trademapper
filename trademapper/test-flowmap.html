<!DOCTYPE html>
<html>
<head profile="http://www.w3.org/2005/10/profile">
	<meta charset="utf-8">
	<title>Flowmap Test</title>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="js/spiralTree.js"></script>
</head>
<body>
	<header id="mapheader">
	</header>
	<div id="trademapper">
		<svg id="thesvg" width="3000" height="3000" viewBox="0 0 900 900">
		</svg>
	</div>
	</div>
	<script type="text/javascript">
// step 1
var svgMap = d3.select('#thesvg');
var myFlow = new flowmap.SpiralTree(svgMap);

// step 2
var projection = d3.geo.mercator();
var pathmaker = d3.geo.path().projection(projection);
myFlow.setProjection(projection);

// step 3
myFlow.setColor('spiralSegment', 'red');
myFlow.setColor('center', 'orange');
myFlow.setColor('terminal', 'blue');
myFlow.setWidth(4);
//myFlow.setAlpha(0.5);
//myFlow.setThreshold(1);
myFlow.setInfoFields(["lat", "lng"]);
//myFlow.setVaryStrokeWidth(false);

// step 4
var origin = {lat: 37, lng: 1, quantity: 0};
var terminals = [
	{lat: 15, lng: 20, quantity: 10},
	{lat: -15, lng: 20, quantity: 20},
	{lat: 15, lng: 40, quantity: 30}
];
myFlow.preprocess(terminals, origin);

// step 5
myFlow.drawTree();

// second tree
myFlow.setColor('spiralSegment', 'green');
origin = {lat: 54, lng: -10, quantity: 0};
terminals = [
	{lat: 27, lng: -20, quantity: 10},
	{lat: -24, lng: -20, quantity: 20},
	{lat: 23, lng: -40, quantity: 30}
];
myFlow.preprocess(terminals, origin);
myFlow.drawTree();

// line tree
myFlow.setColor('spiralSegment', 'steelblue');
origin = {lat: 0, lng: -80, quantity: 0};
terminals = [
	{lat: 20, lng: -80, quantity: 10},
	{lat: -20, lng: -80, quantity: 30}
];
myFlow.preprocess(terminals, origin);
myFlow.drawTree();

// line tree
myFlow.setColor('spiralSegment', 'lightgreen');
origin = {lat: 20, lng: -50, quantity: 0};
terminals = [
	{lat: 0, lng: -70, quantity: 10},
	{lat: 40, lng: -70, quantity: 30},
	{lat: 0, lng: -30, quantity: 10},
	{lat: 40, lng: -30, quantity: 30}
];
myFlow.preprocess(terminals, origin);
myFlow.drawTree();
</script>
</body>
</html>
